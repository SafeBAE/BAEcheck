<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BAEcheck ‚Äî Reflection & Accountability</title>
  <style>
    :root{
      /* SafeBAE palette */
      --sb-light:#D1FEFF;
      --sb-teal:#13848F;
      --sb-mint:#15FFC8;
      --sb-deep:#1D414E;

      /* App tokens */
      --bg: var(--sb-deep);
      --text: var(--sb-light);
      --muted: rgba(209,254,255,.78);
      --border: rgba(209,254,255,.18);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --accent: var(--sb-mint);
      --danger: var(--sb-teal);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
                  radial-gradient(1200px 800px at 20% 10%, rgba(21,255,200,.18), transparent 55%),
                  radial-gradient(1000px 700px at 90% 20%, rgba(19,132,143,.22), transparent 60%),
                  radial-gradient(900px 600px at 40% 100%, rgba(209,254,255,.10), transparent 55%),
                  var(--bg);
      color: var(--text);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding: 28px 14px 60px;
      transition: background 600ms ease;
    }
    .app{ width: min(540px, 100%); }
    .topbar{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:14px; }
    .brand { display:flex; align-items:center; gap:10px; }
    .logo svg{ width:26px; height:36px; transform-origin: 50% 100%; animation: grow 7s ease-in-out infinite; }
    @keyframes grow {
      0%   { transform: scale(0.88) translateY(4px); opacity: .85; }
      50%  { transform: scale(1.00) translateY(0px); opacity: 1; }
      100% { transform: scale(0.92) translateY(2px); opacity: .92; }
    }
    .brand .title{ font-weight: 900; font-size: 16px; }
    .neon-underline{
      position: relative;
      display: inline-block;
    }
    .neon-underline::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-3px;
      width:100%;
      height:3px;
      background:#15FFC8;
      box-shadow:0 0 6px #15FFC8, 0 0 12px #15FFC8;
      border-radius:2px;
    }
    .brand .subtitle{ font-size:12px; color: var(--muted); margin-top:2px; }
    .topActions{ display:flex; gap:10px; }
    .btn{
      appearance:none; border:none;
      padding: 12px 14px;
      border-radius: 12px;
      font-weight: 800;
      cursor:pointer;
      background: rgba(255,255,255,.06);
      color: var(--text);
      border: 1px solid var(--border);
      transition: transform .06s ease, background .15s ease;
      text-align:left;
      width:100%;
    }
    .btn:hover{
      background: rgba(21,255,200,.18); /* mint glow */
      border: 1px solid rgba(21,255,200,.65);
      box-shadow: 0 0 8px rgba(21,255,200,.35);
      color: var(--sb-light);
    }
    .btn:active{ transform: translateY(1px); }
    .btnSmall{ padding:10px 12px; border-radius: 999px; font-size: 12px; width:auto; }
    .btnPrimary{
      background: linear-gradient(135deg, rgba(21,255,200,.98), rgba(19,132,143,.85));
      color:#041114; border: 1px solid rgba(209,254,255,.24);
    }
    .btnDanger{
      background: rgba(19,132,143,.22);
      border: 1px solid rgba(21,255,200,.30);
      color: var(--sb-light);
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .h1{ font-size: 22px; margin:0 0 10px; font-weight: 900; line-height:1.2; }
    .p{ margin:0 0 12px; color: var(--muted); line-height:1.45; }
    .grid{ display:grid; gap:10px; margin-top: 12px;}
    .note{
      border-left: 3px solid rgba(21,255,200,.70);
      background: rgba(21,255,200,.10);
      padding: 10px 12px;
      border-radius: 12px;
      color: var(--sb-light);
      font-size: 13px;
      line-height:1.35;
      margin: 10px 0 14px;
    }
    .footer{ margin-top:12px; display:flex; justify-content:space-between; gap:10px; font-size:12px; color: var(--muted);}
    a.link{ color: var(--sb-mint); text-decoration:none; font-weight:800;}
    a.link:hover{ text-decoration:underline;}
    .btnBack{
      width:auto;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 13px;
      color: var(--muted);
      background: rgba(255,255,255,.04);
      border: 1px solid var(--border);
      margin-bottom: 8px;
    }
    .btnBack:hover{ color: var(--text); background: rgba(255,255,255,.08); }
    .mutedBox{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px dashed rgba(255,255,255,.18);
      color: var(--muted);
      font-size: 12px;
      line-height:1.35;
    }


    /* Button content (icon + label) */
    .btnContent{ display:flex; align-items:center; gap:10px; }
    .btnIcon{ width:22px; text-align:center; font-size:18px; line-height:1; opacity:.95; }
    .btnLabel{ flex:1; }


    /* Breathing icon (anxious/panicking page) */
    .breatheWrap{
      margin: 10px 0 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(21,255,200,.28);
      background: rgba(21,255,200,.08);
    }
    .breathe{
      width: 150px;
      height: 150px;
      display:block;
      filter: drop-shadow(0 0 12px rgba(21,255,200,.18));
    }

    /* Animation layers */
    .breatheCore{
      transform-origin: 50% 50%;
      animation: breathe 10s ease-in-out infinite; /* 4s in, 6s out */
    }
    .breatheRing{
      transform-origin: 50% 50%;
      animation: breatheRing 10s ease-in-out infinite;
      opacity: .62;
    }
    .breatheHalo{
      transform-origin: 50% 50%;
      animation: halo 10s ease-in-out infinite;
      opacity: .30;
    }
    .breatheDot{
      transform-origin: 50% 50%;
      animation: dot 10s ease-in-out infinite;
      opacity: .9;
    }

    /* 0%‚Üí40% = inhale (4s) | 40%‚Üí100% = exhale (6s) */
    @keyframes breathe{
      0%   { transform: scale(0.86); opacity: .78; }
      40%  { transform: scale(1.00); opacity: 1; }
      100% { transform: scale(0.86); opacity: .82; }
    }
    @keyframes breatheRing{
      0%   { transform: scale(0.92); opacity: .30; }
      40%  { transform: scale(1.12); opacity: .62; }
      100% { transform: scale(0.92); opacity: .30; }
    }
    @keyframes halo{
      0%   { transform: scale(0.98); opacity: .18; }
      40%  { transform: scale(1.22); opacity: .34; }
      100% { transform: scale(0.98); opacity: .18; }
    }
    @keyframes dot{
      0%   { transform: scale(0.92); opacity: .70; }
      40%  { transform: scale(1.08); opacity: .95; }
      100% { transform: scale(0.92); opacity: .75; }
    }

    @media (prefers-reduced-motion: reduce){
      .breatheCore, .breatheRing, .breatheHalo, .breatheDot{ animation: none; }
    }



    /* Modal */
    .modalOverlay{
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      z-index: 9999;
    }
    .modal{
      width: min(520px, 100%);
      border-radius: 18px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .modalHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 8px;
    }
    .modalTitle{ font-weight: 950; font-size: 16px; }
    .modalClose{
      width: auto;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
    }
    .modalActions{ display:flex; gap:10px; margin-top: 14px; }
    .modalActions .btn{ width:auto; }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">
        <div class="logo">
          <svg viewBox="0 0 100 140" xmlns="http://www.w3.org/2000/svg">
            <!-- Stem -->
            <line x1="50" y1="64" x2="50" y2="130" stroke="#15FFC8" stroke-width="6" stroke-linecap="round" />
            <!-- Center -->
            <circle cx="50" cy="50" r="14" fill="#15FFC8" />
            <!-- Petals -->
            <g fill="#D1FEFF">
              <ellipse cx="50" cy="20" rx="10" ry="18"/>
              <ellipse cx="50" cy="80" rx="10" ry="18"/>
              <ellipse cx="20" cy="50" rx="18" ry="10"/>
              <ellipse cx="80" cy="50" rx="18" ry="10"/>
              <ellipse cx="30" cy="30" rx="12" ry="18" transform="rotate(-45 30 30)"/>
              <ellipse cx="70" cy="30" rx="12" ry="18" transform="rotate(45 70 30)"/>
              <ellipse cx="30" cy="70" rx="12" ry="18" transform="rotate(45 30 70)"/>
              <ellipse cx="70" cy="70" rx="12" ry="18" transform="rotate(-45 70 70)"/>
            </g>
          </svg>
        </div>
        <div class="title"><span class="neon-underline">BAEcheck</span></div>
        <div class="subtitle">Reflection & Accountability</div>
      </div>
      <div class="topActions">
        <button class="btn btnSmall btnDanger" data-action="quickExit">Quick exit</button>
        <button class="btn btnSmall" data-action="restart">Restart</button>
      </div>
    </div>

    <div class="card" id="screen"></div>

    <div class="footer">
      <div>No Account. No Names. No Judgment. Just Unfiltered Answers.</div>
      <div><a class="link" href="#" data-action="about">About</a></div>
    </div>

    <div style="text-align:center; margin-top:14px; font-size:12px; color: var(--muted);">
      A Project of SafeBAE
    </div>
<div style="text-align:center; margin-top:18px;">
  <img 
    src="safebae-logo.png"
    alt="SafeBAE Logo"
    style="
      max-width: 280px;
      width: 80%;
      height: auto;
      opacity: 0.9;
    "
  />
</div>

  </div>
  </div>

<script>
const state = { entry:null, scenario:null, emotion:null, path:null, screenId:"landing", showWhyModal: true, history:[] };
const screen = document.getElementById("screen");

function go(id){ if(state.screenId !== id) state.history.push(state.screenId); state.screenId=id; render(); }
function goBack(){ if(state.history.length){ state.screenId=state.history.pop(); render(); } }
function reset(){ state.entry=null; state.scenario=null; state.emotion=null; state.path=null; state.history=[]; go("landing"); }

document.addEventListener("click", (e)=>{
  const el = e.target.closest("[data-action]");
  if(!el) return;
  e.preventDefault();
  const a = el.getAttribute("data-action");
  actions[a]?.();
});

const actions = {
  start: ()=>go("bringsYouHere"),
  whyBtn: ()=>go("whyThisExists"),
  pathMenu: ()=>go("pathMenu"),
  about: ()=>go("about"),
  restart: ()=>reset(),
  quickExit: ()=>window.location.replace("https://www.google.com/search?q="),
  goBack: ()=>goBack(),
};

function backBtn(){ return state.history.length ? `<button class="btn btnBack" data-action="goBack">&#8592; Back</button>` : ""; }

function card(h1, ps=[], note=null, content=""){
  return `
    <div class="h1">${h1}</div>
    ${ps.map(p=>`<div class="p">${p}</div>`).join("")}
    ${note?`<div class="note">${note}</div>`:""}
    ${content}
  `;
}
function btn(label, action, cls="btn"){ return `<button class="${cls}" data-action="${action}">${label}</button>`; }
function btnIcon(label, action, icon, cls="btn"){
  return `<button class="${cls}" data-action="${action}">
    <span class="btnContent">
      <span class="btnIcon" aria-hidden="true">${icon}</span>
      <span class="btnLabel">${label}</span>
    </span>
  </button>`;
}
function grid(inner){ return `<div class="grid">${inner}</div>`; }


function breatheWidget(){
  return `
<div class="breatheWrap" role="img" aria-label="Breathing guide: breathe in as it grows, breathe out as it shrinks">
  <svg class="breathe" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">

    <!-- Outer halo (very subtle) -->
    <g class="breatheHalo">
      <circle cx="100" cy="100" r="82" fill="none" stroke="rgba(209,254,255,.35)" stroke-width="2"/>
    </g>

    <!-- Middle ring (tracks breath) -->
    <g class="breatheRing">
      <circle cx="100" cy="100" r="68" fill="none" stroke="rgba(21,255,200,.55)" stroke-width="3"/>
    </g>

    <!-- Core (tracks breath) -->
    <g class="breatheCore">
      <circle cx="100" cy="100" r="54" fill="rgba(21,255,200,.22)" stroke="rgba(21,255,200,.92)" stroke-width="3"/>
    </g>

  </svg>
</div>
  `;
}

function catRunnerMarkup(){
  return `
    <div class="note">
      <b>Reset break:</b> play for 20‚Äì30 seconds, then come back to your next step.<br>
      <span style="font-size:12px; color: var(--muted);">
      </span>
    </div>

    <div style="
      border:1px solid var(--border);
      border-radius: 16px;
      padding: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
    ">
      <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px;">
        <div style="border:1px solid var(--border); border-radius:999px; padding:6px 10px; font-weight:900; font-size:12px;">
          Score: <span id="cr_score" style="color:var(--sb-mint)">0</span>
        </div>
        <div style="border:1px solid var(--border); border-radius:999px; padding:6px 10px; font-weight:900; font-size:12px;">
          Best: <span id="cr_best" style="color:var(--sb-mint)">0</span>
        </div>
        <div style="border:1px solid var(--border); border-radius:999px; padding:6px 10px; font-weight:900; font-size:12px;">
          Speed: <span id="cr_speed" style="color:var(--sb-mint)">1.0</span>x
        </div>
        <button class="btn btnSmall" type="button" id="cr_restart" style="margin-left:auto;">Restart</button>
      </div>

      <canvas id="cr_game" width="900" height="260"
        style="
          width:100%;
          height:auto;
          border-radius: 14px;
          border: 1px solid var(--border);
          background: rgba(0,0,0,.18);
          touch-action: manipulation;
          display:block;
        "
        aria-label="Runner game"
      ></canvas>

      <div style="margin-top:10px; font-size:12px; color: var(--muted); line-height:1.35;">
        Controls: <b>Space</b>/<b>‚Üë</b> jump ‚Ä¢ <b>‚Üì</b> fast-drop ‚Ä¢ tap to jump on mobile ‚Ä¢ <b>R</b> restart
      </div>
    </div>
  `;
}

let catRunnerCleanup = null;

function initCatRunner(){
  // Prevent double-mount if user re-renders the same screen
  if (catRunnerCleanup) catRunnerCleanup();

  const canvas = document.getElementById("cr_game");
  const ctx = canvas?.getContext("2d");
  if (!canvas || !ctx) return;

  const scoreEl = document.getElementById("cr_score");
  const bestEl  = document.getElementById("cr_best");
  const speedEl = document.getElementById("cr_speed");
  const restartBtn = document.getElementById("cr_restart");

  // Best score persistence (local to browser)
  const BEST_KEY = "safebae_runner_best_v2";
  let best = Number(localStorage.getItem(BEST_KEY) || 0);
  bestEl.textContent = best;

  // --- Cat SVG sprite (embedded) ---
  const CAT_SVG_RAW = `<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12.0196 14.9374C11.7284 14.9374 11.4307 14.9818 11.1784 15.0796C11.0546 15.1275 10.9032 15.2031 10.7699 15.3252C10.6361 15.4479 10.4632 15.6749 10.4632 15.9999C10.4632 16.3249 10.6361 16.5519 10.7699 16.6745C10.9032 16.7967 11.0546 16.8722 11.1784 16.9202C11.4307 17.018 11.7284 17.0624 12.0196 17.0624C12.3109 17.0624 12.6085 17.018 12.8609 16.9202C12.9846 16.8722 13.136 16.7967 13.2693 16.6745C13.4032 16.5519 13.5761 16.3249 13.5761 15.9999C13.5761 15.6749 13.4032 15.4479 13.2693 15.3252C13.136 15.2031 12.9846 15.1275 12.8609 15.0796C12.6085 14.9818 12.3109 14.9374 12.0196 14.9374Z" fill="#1C274C"/>
<path d="M14.0365 12.6464C14.2015 12.38 14.5274 12.0625 15.0163 12.0625C15.5051 12.0625 15.831 12.38 15.996 12.6464C16.1681 12.9243 16.2501 13.2612 16.2501 13.5938C16.2501 13.9263 16.1681 14.2632 15.996 14.5411C15.831 14.8075 15.5051 15.125 15.0163 15.125C14.5274 15.125 14.2015 14.8075 14.0365 14.5411C13.8644 14.2632 13.7824 13.9263 13.7824 13.5938C13.7824 13.2612 13.8644 12.9243 14.0365 12.6464Z" fill="#1C274C"/>
<path d="M9.01634 12.0625C8.52751 12.0625 8.20161 12.38 8.03658 12.6464C7.86445 12.9243 7.78247 13.2612 7.78247 13.5938C7.78247 13.9263 7.86445 14.2632 8.03658 14.5411C8.20161 14.8075 8.52751 15.125 9.01634 15.125C9.50518 15.125 9.83108 14.8075 9.9961 14.5411C10.1682 14.2632 10.2502 13.9263 10.2502 13.5938C10.2502 13.2612 10.1682 12.9243 9.9961 12.6464C9.83108 12.38 9.50518 12.0625 9.01634 12.0625Z" fill="#1C274C"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.09485 4.25C5.48148 4.25 4.77463 4.42871 4.20882 4.91616C3.62226 5.4215 3.27004 6.18781 3.27004 7.1875V9.0625L3.27005 9.06545C3.2712 9.35941 3.3211 9.94757 3.4888 10.4392C3.54365 10.6001 3.63129 10.8134 3.77764 11.0058C3.49364 11.5688 3.35904 12.1495 3.29787 12.7095C3.2468 13.1771 3.24611 13.6679 3.25424 14.1211C2.5932 14.3507 1.90877 14.6349 1.5932 14.8387C1.24524 15.0634 1.14534 15.5277 1.37006 15.8756C1.59478 16.2236 2.05903 16.3235 2.40698 16.0988C2.5234 16.0236 2.86686 15.8664 3.31867 15.6939C3.38755 16.173 3.52716 16.6095 3.7221 17.0063C3.56621 17.1035 3.42847 17.1935 3.31889 17.2652C3.27694 17.2926 3.23912 17.3173 3.20599 17.3387C2.85803 17.5634 2.75813 18.0277 2.98285 18.3756C3.20757 18.7236 3.67182 18.8235 4.01978 18.5988C4.0609 18.5722 4.10473 18.5436 4.15098 18.5134C4.28216 18.4278 4.43287 18.3294 4.59701 18.2288C5.18653 18.8313 5.91865 19.2964 6.67916 19.6462C8.45998 20.4654 10.569 20.75 12.0001 20.75C13.4311 20.75 15.5402 20.4654 17.321 19.6462C18.0815 19.2964 18.8136 18.8313 19.4031 18.2288C19.5673 18.3294 19.718 18.4278 19.8491 18.5134C19.8954 18.5436 19.9392 18.5722 19.9803 18.5988C20.3283 18.8235 20.7925 18.7236 21.0173 18.3756C21.242 18.0277 21.1421 17.5634 20.7941 17.3387C20.761 17.3173 20.7232 17.2926 20.6812 17.2652C20.5716 17.1935 20.4339 17.1035 20.2781 17.0063C20.473 16.6095 20.6127 16.173 20.6815 15.6938C21.1335 15.8663 21.4771 16.0236 21.5936 16.0988C21.9415 16.3235 22.4058 16.2236 22.6305 15.8756C22.8552 15.5277 22.7553 15.0634 22.4074 14.8387C22.0917 14.6349 21.4071 14.3506 20.7459 14.121C20.7541 13.6678 20.7534 13.177 20.7023 12.7095C20.6412 12.1495 20.5065 11.5688 20.2225 11.0058C20.3689 10.8134 20.4565 10.6001 20.5114 10.4392C20.6791 9.94758 20.729 9.35941 20.7301 9.06545L20.7302 9.0625V7.18761C20.7302 6.18792 20.3779 5.42162 19.7914 4.91628C19.2256 4.42882 18.5187 4.25011 17.9054 4.25011C17.4969 4.25011 17.0744 4.40685 16.7337 4.56076C16.3726 4.72392 15.9952 4.9359 15.6558 5.13136C15.5828 5.17339 15.5119 5.21444 15.443 5.25432L15.441 5.25548C15.177 5.4084 14.9427 5.5441 14.7339 5.65167C14.6042 5.7185 14.5035 5.7643 14.4285 5.79206C14.3969 5.80377 14.3767 5.80966 14.3663 5.81242C14.1129 5.81102 13.9514 5.79033 13.7181 5.76044C13.6681 5.75403 13.6147 5.74719 13.5564 5.74003C13.2098 5.69743 12.7722 5.65636 12.0001 5.65636C11.228 5.65636 10.7905 5.69743 10.4438 5.74003C10.3855 5.74719 10.3322 5.75403 10.2821 5.76044C10.0489 5.79033 9.88738 5.81102 9.63388 5.81242C9.62352 5.80966 9.60332 5.80376 9.57174 5.79206C9.49678 5.7643 9.39604 5.71849 9.26633 5.65166C9.05755 5.54408 8.82331 5.40842 8.55926 5.25548C8.48975 5.21523 8.41818 5.17377 8.34446 5.13132C8.00502 4.93584 7.62764 4.72384 7.26652 4.56067C6.92587 4.40675 6.50329 4.25 6.09485 4.25ZM6.16192 17.6138C6.49595 17.8657 6.8808 18.0879 7.30604 18.2835C8.83694 18.9877 10.7179 19.25 12.0001 19.25C13.2823 19.25 15.1632 18.9877 16.6941 18.2835C17.1194 18.0879 17.5042 17.8657 17.8382 17.6138C17.4858 17.5524 17.2179 17.245 17.2179 16.875C17.2179 16.4608 17.5537 16.125 17.9679 16.125C18.2951 16.125 18.6295 16.2068 18.9399 16.3204C19.0985 15.9885 19.1959 15.625 19.2226 15.2271C18.9249 15.1544 18.7193 15.125 18.6134 15.125C18.1992 15.125 17.8634 14.7892 17.8634 14.375C17.8634 13.9608 18.1992 13.625 18.6134 13.625C18.8081 13.625 19.0284 13.6542 19.2504 13.6974C19.2505 13.4213 19.2415 13.1502 19.2112 12.8724C19.1407 12.227 18.958 11.6541 18.5269 11.1447C18.3727 10.9625 18.1809 10.7813 17.9402 10.6045C17.6063 10.3594 17.5344 9.88999 17.7796 9.55611C18.0247 9.22224 18.4941 9.15031 18.828 9.39546C18.9471 9.48292 19.0597 9.57282 19.1659 9.66506C19.2099 9.43686 19.2295 9.19817 19.2302 9.06087V7.18761C19.2302 6.56231 19.0238 6.23486 18.8123 6.0527C18.5801 5.85266 18.2496 5.75011 17.9054 5.75011C17.835 5.75011 17.659 5.78868 17.3513 5.92771C17.064 6.0575 16.7432 6.23612 16.4043 6.43125C16.3407 6.4679 16.2759 6.50544 16.2106 6.54328C15.9428 6.69843 15.666 6.85883 15.4209 6.98509C15.2663 7.06473 15.1052 7.14099 14.9495 7.19867C14.8058 7.25192 14.607 7.3125 14.3941 7.3125C14.0223 7.3125 13.7617 7.27877 13.5115 7.2464C13.4654 7.24043 13.4196 7.23449 13.3735 7.22883C13.0848 7.19336 12.7084 7.15636 12.0001 7.15636C11.2919 7.15636 10.9154 7.19336 10.6267 7.22883C10.5807 7.23449 10.5349 7.24042 10.4887 7.24639C10.2386 7.27877 9.97796 7.3125 9.6061 7.3125C9.39326 7.3125 9.19445 7.25191 9.05069 7.19866C8.89497 7.14098 8.73386 7.06471 8.57928 6.98506C8.33423 6.8588 8.05742 6.69839 7.78968 6.54325C7.72435 6.50539 7.65955 6.46784 7.59589 6.43118C7.25702 6.23603 6.93614 6.05741 6.64888 5.92761C6.34115 5.78856 6.16522 5.75 6.09485 5.75C5.75062 5.75 5.42007 5.85254 5.18787 6.05259C4.97643 6.23475 4.77004 6.56219 4.77004 7.1875V9.06088C4.7707 9.19819 4.79025 9.43686 4.83425 9.66506C4.94053 9.57281 5.05309 9.48292 5.1722 9.39546C5.50608 9.15031 5.97547 9.22224 6.22062 9.55612C6.46577 9.88999 6.39385 10.3594 6.05997 10.6045C5.81926 10.7813 5.62748 10.9625 5.47331 11.1447C5.04223 11.6541 4.85949 12.227 4.789 12.8724C4.75865 13.1502 4.74966 13.4213 4.74975 13.6975C4.97192 13.6543 5.19231 13.625 5.38719 13.625C5.80141 13.625 6.13719 13.9608 6.13719 14.375C6.13719 14.7892 5.80141 15.125 5.38719 15.125C5.28121 15.125 5.07549 15.1544 4.77758 15.2271C4.80434 15.625 4.90168 15.9885 5.06027 16.3203C5.37069 16.2068 5.70504 16.125 6.03224 16.125C6.44646 16.125 6.78224 16.4608 6.78224 16.875C6.78224 17.245 6.51433 17.5524 6.16192 17.6138Z" fill="#1C274C"/>
</svg>`;

  function recolorSvg(svg, fill) {
    return svg
      .replace(/fill="(?!none)[^"]*"/g, `fill="${fill}"`)
      .replace(/stroke="(?!none)[^"]*"/g, `stroke="${fill}"`);
  }
  function makeSvgDataUri(svgString) {
    return "data:image/svg+xml;charset=utf-8," + encodeURIComponent(svgString);
  }

  const catImg = new Image();
  catImg.decoding = "async";
  catImg.src = makeSvgDataUri(recolorSvg(CAT_SVG_RAW, "#15FFC8"));

  const W = canvas.width, H = canvas.height;
  const groundY = Math.round(H * 0.78);

  const gravity = 2200;
  const jumpVel = -780;
  const dropVel = 900;

  let running = true;
let started = false;
  let time = 0;
  let score = 0;
  let speed = 520;
  let speedMult = 1;
  let spawnTimer = 0;
  let nextSpawn = 0.9;

  const player = { x: 110, y: groundY, w: 46, h: 46, vy: 0, onGround: true };
  const obstacles = [];

  function rand(min, max){ return Math.random() * (max - min) + min; }

  function spawnObstacle() {
    const tall = Math.random() < 0.45;
    const w = tall ? rand(18, 28) : rand(16, 24);
    const h = tall ? rand(42, 66) : rand(28, 42);
    obstacles.push({ x: W + 20, y: groundY, w, h });
  }

  function aabb(ax, ay, aw, ah, bx, by, bw, bh) {
    const aTop = ay - ah, aLeft = ax, aRight = ax + aw, aBottom = ay;
    const bTop = by - bh, bLeft = bx, bRight = bx + bw, bBottom = by;
    return !(aRight < bLeft || aLeft > bRight || aBottom < bTop || aTop > bBottom);
  }

  function resetGame() {
    running = true;
    time = 0;
    score = 0;
    speed = 520;
    speedMult = 1;
    spawnTimer = 0;
    nextSpawn = 0.9;
    obstacles.length = 0;

    player.y = groundY;
    player.vy = 0;
    player.onGround = true;

    scoreEl.textContent = "0";
    speedEl.textContent = "1.0";
  }

  function jump() {
  if (!started) {
    started = true;
    running = true;
    last = performance.now();
    raf = requestAnimationFrame(loop);
    return;
  }

  if (!running) {
    resetGame();
    drawStartOverlay();
    started = false;
    return;
  }

  if (player.onGround) {
    player.vy = jumpVel;
    player.onGround = false;
  }
}

  function fastDrop() {
    if (!player.onGround) player.vy = Math.max(player.vy, dropVel);
  }

  // Draw helpers
  function roundRect(ctx, x, y, w, h, r) {
    const radius = Math.min(r, w/2, h/2);
    ctx.beginPath();
    ctx.moveTo(x + radius, y);
    ctx.lineTo(x + w - radius, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + radius);
    ctx.lineTo(x + w, y + h - radius);
    ctx.quadraticCurveTo(x + w, y + h, x + w - radius, y + h);
    ctx.lineTo(x + radius, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - radius);
    ctx.lineTo(x, y + radius);
    ctx.quadraticCurveTo(x, y, x + radius, y);
    ctx.closePath();
  }

  function drawGround() {
    ctx.save();
    ctx.strokeStyle = "rgba(209,254,255,.45)";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, groundY + 1);
    ctx.lineTo(W, groundY + 1);
    ctx.stroke();

    const tickCount = 26;
    ctx.strokeStyle = "rgba(21,255,200,.25)";
    ctx.lineWidth = 2;
    for (let i = 0; i < tickCount; i++) {
      const seg = (W / tickCount);
      const x = (i * seg - (time * speed * 0.25) % seg);
      ctx.beginPath();
      ctx.moveTo(x, groundY + 10);
      ctx.lineTo(x + 14, groundY + 10);
      ctx.stroke();
    }
    ctx.restore();
  }

  function drawObstacle(o) {
    ctx.save();
    ctx.translate(o.x, o.y - o.h);

    ctx.fillStyle = "rgba(19,132,143,.22)";
    ctx.strokeStyle = "rgba(209,254,255,.70)";
    ctx.lineWidth = 3;

    roundRect(ctx, 0, 0, o.w, o.h, 10);
    ctx.fill(); ctx.stroke();

    if (o.h > 44) {
      ctx.fillStyle = "rgba(21,255,200,.14)";
      ctx.strokeStyle = "rgba(21,255,200,.75)";
      const bh = Math.min(18, o.h*0.35);
      roundRect(ctx, -Math.min(14, o.w*0.6), o.h*0.38, Math.min(18, o.w*0.9), bh, 10);
      ctx.fill(); ctx.stroke();
    }

    ctx.restore();
  }

function drawStartOverlay(){
  ctx.clearRect(0, 0, W, H);
  drawGround();
  drawPlayer();

  ctx.save();
  ctx.fillStyle = "rgba(0,0,0,.45)";
  ctx.fillRect(0, 0, W, H);

  ctx.fillStyle = "rgba(209,254,255,.95)";
  ctx.font = "950 22px ui-sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("Tap or Press Space to Start", W/2, H*0.48);

  ctx.fillStyle = "rgba(209,254,255,.7)";
  ctx.font = "900 13px ui-sans-serif";
  ctx.fillText("This is just a reset break.", W/2, H*0.62);

  ctx.restore();
}

  function drawPlayer() {
    const { x, y, w, h } = player;

    ctx.save();
    ctx.fillStyle = "rgba(0,0,0,.18)";
    ctx.beginPath();
    ctx.ellipse(x + w*0.55, y + 10, w*0.55, 6, 0, 0, Math.PI*2);
    ctx.fill();

    if (!catImg.complete || catImg.naturalWidth === 0) {
      ctx.fillStyle = "rgba(21,255,200,.18)";
      ctx.strokeStyle = "rgba(21,255,200,.95)";
      ctx.lineWidth = 3;
      roundRect(ctx, x, y - h, w, h, 12);
      ctx.fill(); ctx.stroke();
      ctx.restore();
      return;
    }

    const bob = player.onGround ? Math.sin(time * 12) * 1.5 : -2;
    ctx.drawImage(catImg, x - 2, (y - h) + bob, w + 10, h + 10);
    ctx.restore();
  }

  function drawOverlay(text) {
    ctx.save();
    ctx.fillStyle = "rgba(0,0,0,.35)";
    ctx.fillRect(0, 0, W, H);

    ctx.fillStyle = "rgba(209,254,255,.95)";
    ctx.font = "950 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
    ctx.textAlign = "center";
    ctx.fillText(text, W/2, H*0.46);

    ctx.fillStyle = "rgba(209,254,255,.75)";
    ctx.font = "900 13px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
    ctx.fillText("Press Space / Tap to restart", W/2, H*0.62);
    ctx.restore();
  }

  function step(dt) {
    time += dt;

    speed += 18 * dt;
    speedMult = 1 + (speed - 520) / 900;
    speedEl.textContent = speedMult.toFixed(1);

    score += (dt * 10) * speedMult;
    scoreEl.textContent = String(Math.floor(score));

    player.vy += gravity * dt;
    player.y += player.vy * dt;

    if (player.y >= groundY) {
      player.y = groundY;
      player.vy = 0;
      player.onGround = true;
    } else {
      player.onGround = false;
    }

    spawnTimer += dt;
    if (spawnTimer >= nextSpawn) {
      spawnTimer = 0;
      nextSpawn = rand(0.65, 1.15) / Math.max(1, speedMult * 0.85);
      spawnObstacle();
    }

    for (let i = obstacles.length - 1; i >= 0; i--) {
      obstacles[i].x -= speed * dt;
      if (obstacles[i].x < -80) obstacles.splice(i, 1);
    }

    for (const o of obstacles) {
      if (aabb(player.x, player.y, player.w, player.h, o.x, o.y, o.w, o.h)) {
        running = false;
        break;
      }
    }

    if (!running) {
      const finalScore = Math.floor(score);
      if (finalScore > best) {
        best = finalScore;
        localStorage.setItem(BEST_KEY, String(best));
        bestEl.textContent = String(best);
      }
    }
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    drawGround();
    for (const o of obstacles) drawObstacle(o);
    drawPlayer();
    if (!running) drawOverlay("Game Over");
  }

  let raf = null;
  let last = performance.now();
  function loop(now) {
    const dt = Math.min(0.033, (now - last) / 1000);
    last = now;
    if (running) step(dt);
    draw();
    raf = requestAnimationFrame(loop);
  }

  // Input (scoped + cleanup)
  const onKeyDown = (e) => {
    if (e.code === "Space" || e.code === "ArrowUp") { e.preventDefault(); jump(); }
    if (e.code === "ArrowDown") { e.preventDefault(); fastDrop(); }
    if (e.code === "KeyR") { e.preventDefault(); resetGame(); }
  };

  window.addEventListener("keydown", onKeyDown);
  canvas.addEventListener("pointerdown", jump);
  restartBtn.addEventListener("click", resetGame);

  resetGame();
drawStartOverlay();   // show start screen

  // cleanup for SPA screen switches
  catRunnerCleanup = () => {
    if (raf) cancelAnimationFrame(raf);
    window.removeEventListener("keydown", onKeyDown);
    canvas.removeEventListener("pointerdown", jump);
    restartBtn.removeEventListener("click", resetGame);
    catRunnerCleanup = null;
  };
}

function entryLabel(e){
  return ({
    crossed_boundary:"Worried I crossed a boundary",
    they_mad:"They‚Äôre mad and I think I did something wrong",
    not_sure_ok:"Not sure if what happened was okay",
    made_uncomfortable:"Someone said I made them uncomfortable",
    cant_explain:"I don‚Äôt know how to explain it",
    learn_consent:"I want to understand consent better",
    accidental_assault:"I think I accidentally sexually assaulted someone"
  })[e] || "‚Äî";
}
function scenarioLabel(s){
  return ({
    freeze:"They froze or got quiet",
    pulled_away:"They pulled away",
    drinking:"We were drinking",
    not_sure_wanted:"Not sure they wanted it",
    upset_after:"They seemed upset afterward",
    not_sure_what:"I‚Äôm still not sure what happened",
    pressure:"I kept persuading or pressuring them",
    age_power:"There was an age or power difference",
    digital:"Something happened digitally (photos/messages)",
    coercion:"I ignored a clear ‚Äòno‚Äô",
    relationship:"We were in a relationship and I assumed consent"
  })[s] || "‚Äî";
}

function routeScenario(s){
  state.scenario = s;

  // Always show an explanation screen for every selection.
  // (These screens then route into the shared emotion ‚Üí next steps flow.)

  // Core behavioral-signal scenarios
  if(s === "freeze") return go("A_freeze_whatItMeans");
  if(s === "pulled_away") return go("C_pulledAway_signal");
  if(s === "drinking") return go("B_drinking_basics");

  // Wide-branch scenarios
  if(s === "pressure") return go("D_pressure");
  if(s === "age_power") return go("E_age_power");
  if(s === "digital") return go("F_digital");
  if(s === "coercion") return go("G_coercion");
  if(s === "relationship") return go("H_relationship");

  // Ambiguity / aftermath scenarios
  if(s === "not_sure_wanted") return go("I_not_sure_wanted");
  if(s === "upset_after") return go("J_upset_after");
  if(s === "not_sure_what") return go("K_not_sure_what");

  // If we somehow reach an unknown key, default to emotion (safe fallback).
  return go("emotion");
}

function render(){
  // Simple progress indicator map
  const progressMap = {
    landing: 0,
    bringsYouHere: 1,
    entryDeescalate: 2,
    topScenario: 2,
    A_freeze_whatItMeans: 3,
    A_freeze_impact: 4,
    B_drinking_basics: 3,
    B_drinking_rule: 4,
    C_pulledAway_signal: 3,
    C_pulledAway_script: 4,
    D_pressure: 3,
    E_age_power: 3,
    F_digital: 3,
    G_coercion: 3,
    H_relationship: 3,
    I_not_sure_wanted: 3,
    J_upset_after: 3,
    K_not_sure_what: 3,
    emotion: 4,
    emotionMessage: 4,
    nextSteps: 5,
    learn: 6,
    prevent: 6,
    repair: 6,
    support: 6,
    closing: 7
  };
  const totalSteps = 7;
  function progressBar(step){
    if(!step) return '';
    const percent = Math.round((step/totalSteps)*100);
    return `<div style="margin-bottom:12px;">
      <div style="font-size:12px;color:var(--muted);margin-bottom:4px;">Step ${step} of ${totalSteps}</div>
      <div style="height:6px;background:rgba(255,255,255,.08);border-radius:6px;overflow:hidden;">
        <div style="height:100%;width:${percent}%;background:var(--accent);transition:width .3s ease;"></div>
      </div>
    </div>`;
  }
  const id = state.screenId;

  // Make background subtly lighten as users move forward (spiral ‚Üí calm)
  const stepNow = progressMap[id] || 0;
  const t = Math.max(0, Math.min(1, stepNow / totalSteps));
  // Interpolate from deep background to lighter teal as progress increases
  // Start: #1D414E (29,65,78)  ‚Üí End: #13848F (19,132,143)
  const r = Math.round(29 + (19-29)*t);
  const g = Math.round(65 + (132-65)*t);
  const b = Math.round(78 + (143-78)*t);
  const base = `rgb(${r},${g},${b})`;
  // Keep your existing SafeBAE gradient vibe, but brighten the base over time
  const glow1 = 0.18 + 0.10*t; // mint glow increases
  const glow2 = 0.22 + 0.06*t; // teal glow increases
  const glow3 = 0.10 + 0.06*t; // light glow increases
  document.body.style.background = `
    radial-gradient(1200px 800px at 20% 10%, rgba(21,255,200,${glow1}), transparent 55%),
    radial-gradient(1000px 700px at 90% 20%, rgba(19,132,143,${glow2}), transparent 60%),
    radial-gradient(900px 600px at 40% 100%, rgba(209,254,255,${glow3}), transparent 55%),
    ${base}
  `;

  if(id==="landing"){
    const spiral = `
      <div style="display:flex; align-items:flex-start; gap:20px; margin-bottom:18px;">
        <div class="h1" style="opacity:.85; line-height:1.3; flex:1;">
          <div style="position:relative;">
            <div style="font-size:20px; filter:blur(0px); opacity:.85;">Did I harm someone?</div>
            <div style="font-size:20px; transform:rotate(-2deg); opacity:.8;">Was that consent?</div>
            <div style="font-size:20px; transform:rotate(1.5deg); opacity:.75;">Did I cross a boundary?</div>
            <div style="font-size:20px; transform:rotate(-1deg); opacity:.7;">Am I a bad person?</div>
            <div style="font-size:20px; transform:rotate(2deg); opacity:.65;">Am I a rapist?</div>
          </div>
        </div>
        <div style="width:120px; opacity:.6;">
          <svg viewBox="0 0 160 160" width="100%" height="100%" fill="none" stroke="#15FFC8" stroke-linecap="round" stroke-linejoin="round" opacity="0.85">
            <!-- Dense chaotic scribble cluster -->
            <g stroke-width="1.6">
              <path d="M80 20 C140 10,150 70,100 90 C50 110,10 60,60 40 C110 20,150 120,80 130 C10 140,20 20,120 50 C150 70,120 160,60 150 C0 140,40 10,140 60" />
              <path d="M70 30 C130 50,120 110,70 90 C20 70,90 20,130 80 C170 140,40 150,50 80 C60 10,140 30,110 120" />
              <path d="M60 40 C120 20,160 80,90 100 C20 120,10 60,80 50 C150 40,130 150,50 130" />
              <path d="M90 35 C140 60,100 130,60 95 C20 60,110 30,140 100 C160 150,30 120,70 60" />
              <path d="M50 50 C120 40,150 90,100 110 C50 130,20 80,80 60 C140 40,120 150,60 140" />
            </g>
            <g stroke-width="1.2" opacity="0.7">
              <path d="M85 25 C120 30,135 75,95 95 C55 115,30 70,70 55 C110 40,130 125,75 120" />
              <path d="M75 45 C125 55,115 115,70 100 C25 85,95 35,125 105" />
              <path d="M65 60 C110 65,100 120,60 110 C20 100,85 50,110 115" />
            </g>
          </svg>
        </div>
      </div>
      <div class="p"></div>
      </div>
    `;

    const mainCard = card(
      "Not sure if you crossed a line?",
      [
        "This is a <b>private</b>, non-punitive reflection tool. You can leave anytime.",
        "We're not here to judge you. We're here to help you slow down, learn, and choose safer next steps."
      ],
      "<b>Privacy:</b> This prototype collects no names, no account info, and stores nothing.",
      grid(
        btn("Start","start","btn btnPrimary") +
        btn("Why this exists","whyBtn","btn") +
        btn("Jump to pathways menu","pathMenu","btn")
      )
    );

    screen.innerHTML = progressBar(progressMap[id]) + spiral + mainCard;
    return;
  }

  if(id==="whyThisExists"){
    screen.innerHTML = backBtn() + card(
      "Why this exists",
      [
        "This tool exists because many people have questions about moments that didn‚Äôt feel clear ‚Äî and want to do better, but aren‚Äôt sure where to start.",
        "Instead of spiraling alone or searching random forums, you can slow down here and think it through step by step.",
        "This space is built for reflection, accountability, and growth ‚Äî not judgment."
      ],
      null,
      grid(btn("Continue","toBrings","btn btnPrimary"))
    );
    actions.toBrings=()=>go("bringsYouHere");
    return;
  }

  if(id==="bringsYouHere"){
    screen.innerHTML = backBtn() + card(
      "What brings you here?",
      ["It‚Äôs okay to not have a clear answer yet."],
      null,
      grid(
        btn("I‚Äôm worried I might have crossed a boundary","e1") +
        btn("The person I was with is mad and I‚Äôm worried I did something wrong","e2") +
        btn("I‚Äôm not sure if what happened was okay","e3") +
        btn("Someone said I made them uncomfortable","e4") +
        btn("I don‚Äôt know how to explain it","e5") +
        btn("I just want to understand consent better","e6") +
        btn("I think I accidentally sexually assaulted someone","e7")
      )
    );
    actions.e1=()=>{state.entry="crossed_boundary"; go("topScenario");};
    actions.e2=()=>{state.entry="they_mad"; go("topScenario");};
    actions.e3=()=>{state.entry="not_sure_ok"; go("topScenario");};
    actions.e4=()=>{state.entry="made_uncomfortable"; go("topScenario");};
    actions.e5=()=>{state.entry="cant_explain"; go("topScenario");};
    actions.e6=()=>{state.entry="learn_consent"; go("consentEdu");};
    actions.e7=()=>{state.entry="accidental_assault"; go("entryDeescalate");};
    return;
  }

  if(id==="entryDeescalate"){
    screen.innerHTML = backBtn() + card(
      "Let‚Äôs slow this down.",
      [
        "It sounds like you‚Äôre carrying something heavy.",
        "This space isn‚Äôt here to judge or label you. It‚Äôs here to help you understand what happened and what you can do next.",
        "We‚Äôll focus on behaviors, impact, and safer next steps."
      ],
      null,
      grid(
        btn("Continue","continue","btn btnPrimary") +
        btn("Go back","back")
      )
    );
    actions.continue=()=>go("topScenario");
    actions.back=()=>go("bringsYouHere");
    return;
  }

  if(id==="topScenario"){
    screen.innerHTML = backBtn() + card(
      "Which feels closest to what happened?",
      ["Pick one. No details needed."],
      null,
      grid(
        btn("They froze or got quiet","s1") +
        btn("They pulled away","s2") +
        btn("We were drinking","s3") +
        btn("I‚Äôm not sure they really wanted it","s4") +
        btn("They seemed upset or distant afterwards","s5") +
        btn("I kept persuading or pressuring them","s7") +
        btn("There was an age or power difference","s8") +
        btn("Something happened digitally (photos/messages)","s9") +
        btn("I ignored a clear ‚Äòno‚Äô","s10") +
        btn("We were in a relationship and I assumed consent","s11") +
        btn("I‚Äôm still not sure what happened","s6")
      )
    );
    actions.s1=()=>routeScenario("freeze");
    actions.s2=()=>routeScenario("pulled_away");
    actions.s3=()=>routeScenario("drinking");
    actions.s4=()=>routeScenario("not_sure_wanted");
    actions.s5=()=>routeScenario("upset_after");
    actions.s6=()=>routeScenario("not_sure_what");
    actions.s7=()=>routeScenario("pressure");
    actions.s8=()=>routeScenario("age_power");
    actions.s9=()=>routeScenario("digital");
    actions.s10=()=>routeScenario("coercion");
    actions.s11=()=>routeScenario("relationship");
    return;
  }

  // ===== Existing Path A (Freeze) =====
  if(id==="A_freeze_whatItMeans"){
    screen.innerHTML = backBtn() + card(
      "üßä When someone freezes‚Ä¶",
      [
        "Sometimes people go quiet, stiff, or unresponsive when they feel overwhelmed or unsafe. That can be a <b>freeze response</b>.",
        "Freezing does <b>not</b> mean ‚Äúyes.‚Äù If you notice freezing, the safest move is to <b>pause and check in</b>."
      ],
      `<details style="margin-top:4px;">
        <summary style="cursor:pointer; font-weight:900; color: var(--sb-light);">Learn More About Why This Happens</summary>
        <div style="margin-top:8px; color: var(--muted); line-height:1.45;">
          When people sense threat or overwhelm, the nervous system can shift into automatic survival states (often described as <b>fight</b>, <b>flight</b>, or <b>freeze</b>). Freeze can look like going quiet, becoming still, or feeling ‚Äústuck.‚Äù It can happen even when someone wants to speak up ‚Äî it‚Äôs not always a conscious choice.
          <br><br>
          Some researchers also describe a more intense form of freezing (sometimes called <b>tonic immobility</b>) where the body becomes temporarily unable to move or respond. The key takeaway: if you notice freezing, it‚Äôs a signal to <b>stop</b>, <b>check in</b>, and prioritize safety.
        </div>
      </details>`,
      grid(btn("Continue","A1","btn btnPrimary"))
    );
    actions.A1=()=>go("A_freeze_impact");
    return;
  }
  if(id==="A_freeze_impact"){
    screen.innerHTML = backBtn() + card(
      "Impact matters ‚Äî even without intent.",
      [
        "If someone froze and things continued, they may have felt unsafe, pressured, or overwhelmed.",
        "<b>Even if you didn‚Äôt intend harm</b>, continuing when someone freezes can leave them feeling violated.",
        "What matters now is what you do next: slow down, take responsibility, and learn skills that prevent harm."
      ],
      null,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== Existing Path B (Drinking) =====
  if(id==="B_drinking_basics"){
    screen.innerHTML = backBtn() + card(
      "Alcohol changes consent.",
      [
        "Consent needs to be clear and freely given. If someone is <b>significantly impaired</b>, they can‚Äôt make informed choices.",
        "Alcohol is also a risk factor for sexual harm ‚Äî so ‚Äúpause and check in‚Äù matters <b>more</b>, not less."
      ],
      `<details style="margin-top:4px;">
        <summary style="cursor:pointer; font-weight:900; color: var(--sb-light);">Learn More About Why This Happens</summary>
        <div style="margin-top:8px; color: var(--muted); line-height:1.45;">
          Alcohol can reduce judgment, make it harder to notice discomfort cues, and increase impulsivity. It can also affect a person‚Äôs ability to freely and clearly communicate what they want.
          <br><br>
          Because intoxication blurs signals, the safest practice is to slow down, check in clearly, and treat uncertainty as a stop sign.
        </div>
      </details>`,
      grid(btn("Continue","B1","btn btnPrimary"))
    );
    actions.B1=()=>go("B_drinking_rule");
    return;
  }
  if(id==="B_drinking_rule"){
    screen.innerHTML = backBtn() + card(
      "A simple safety rule",
      [
        "If you‚Äôre asking yourself ‚Äúwere they too drunk?‚Äù treat that as a <b>stop sign</b>.",
        "Choose the safer option: stop, make sure everyone gets home safely, and revisit another time when everyone is sober."
      ],
      null,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== Existing Path C (Pulled away) =====
  if(id==="C_pulledAway_signal"){
    screen.innerHTML = backBtn() + card(
      "Pulling away is information.",
      [
        "Consent can be withdrawn at any time.",
        "Nonverbal signals ‚Äî like pulling away, going silent, or freezing ‚Äî are reasons to <b>stop</b> and <b>check in</b>, not to keep going."
      ],
      `<details style="margin-top:4px;">
        <summary style="cursor:pointer; font-weight:900; color: var(--sb-light);">Learn More About Why This Happens</summary>
        <div style="margin-top:8px; color: var(--muted); line-height:1.45;">
          People don‚Äôt always say ‚Äúno‚Äù out loud. Sometimes they pull away, go quiet, tense up, or disengage because they feel unsure, overwhelmed, or unsafe.
          <br><br>
          The practical rule is simple: if you notice withdrawal, pause immediately and ask a clear check-in ‚Äî then respect the answer (including silence or hesitation).
        </div>
      </details>`,
      grid(btn("Continue","C1","btn btnPrimary"))
    );
    actions.C1=()=>go("C_pulledAway_script");
    return;
  }
  if(id==="C_pulledAway_script"){
    screen.innerHTML = backBtn() + card(
      "What to do in the moment",
      ["Pause. Take your hands/body back. Try a simple check-in:"],
      "<b>Script:</b> ‚ÄúHey ‚Äî are you okay? Want to stop? We can stop anytime.‚Äù<br><br>Then wait. If they hesitate, go quiet, or pull away again: <b>stop</b>.",
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== New Branch D =====
  if(id==="D_pressure"){
    screen.innerHTML = backBtn() + card(
      "Pressure and persuasion",
      [
        "Repeatedly asking, convincing, bargaining, or emotionally pressuring someone can undermine consent.",
        "If someone agreed only after being worn down ‚Äî or to avoid conflict ‚Äî they may not have felt free to choose.",
        "A good rule: if you have to persuade, it‚Äôs not a yes. The safest move is to stop and give space."
      ],
      `<details style="margin-top:4px;">
        <summary style="cursor:pointer; font-weight:900; color: var(--sb-light);">Learn More About Why This Happens</summary>
        <div style="margin-top:8px; color: var(--muted); line-height:1.45;">
          Consent depends on freedom to choose. Pressure changes the situation by making ‚Äúyes‚Äù feel like the easiest way to end discomfort, avoid anger, or keep the relationship stable.
          <br><br>
          Even when someone says yes, if it came after repeated persuasion, guilt-tripping, or bargaining, they may have felt they couldn‚Äôt say no safely. That‚Äôs why ‚Äúone ask‚Äù and accepting no immediately is a safer norm.
        </div>
      </details>`,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== New Branch E =====
  if(id==="E_age_power"){
    screen.innerHTML = backBtn() + card(
      "Age or power differences",
      [
        "Differences in age, status, popularity, or authority can affect someone‚Äôs ability to freely consent.",
        "When one person has more power, it‚Äôs easier for the other person to feel pressured to go along.",
        "When in doubt, step back. Choosing distance can be a form of accountability and prevention."
      ],
      `<details style="margin-top:4px;">
        <summary style="cursor:pointer; font-weight:900; color: var(--sb-light);">Learn More About Why This Happens</summary>
        <div style="margin-top:8px; color: var(--muted); line-height:1.45;">
          Power differences ‚Äî including age gaps, social status, experience, authority, or emotional leverage ‚Äî can shift how safe someone feels saying no. Even without explicit threats, imbalance can create subtle pressure.
          <br><br>
          Research on coercion and consent shows that people are less likely to refuse when they fear social consequences, disappointment, or losing connection. That‚Äôs why ethical responsibility increases when there is a power gap: the person with more power must take extra care to ensure consent is truly voluntary.
        </div>
      </details>`,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== New Branch F (Digital) =====
  if(id==="F_digital"){
    screen.innerHTML = backBtn() + card(
      "Digital consent matters too",
      [
        "Sharing photos, screenshots, or private messages without permission can cause serious harm.",
        "Pressuring someone to send images or respond sexually is also a consent issue.",
        "Digital harm is still harm ‚Äî even if no one was physically present."
      ],
      `<details style="margin-top:4px;">
        <summary style="cursor:pointer; font-weight:900; color: var(--sb-light);">
          Learn More About Why This Matters
        </summary>
        <div style="margin-top:8px; color: var(--muted); line-height:1.45;">
          Digital interactions can feel casual or fast-moving, but consent still applies.
          Screenshots, forwarding messages, or saving intimate content without permission
          can violate trust and privacy.
          <br><br>
          Prevention rule: never assume digital access equals digital permission.
        </div>
      </details>`,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion = ()=>go("emotion");
    return;
  }

  // ===== New Branch G (Coercion) =====
  if(id==="G_coercion"){
    screen.innerHTML = backBtn() + card(
      "Ignoring a clear ‚Äòno‚Äô",
      [
        "If someone said no, stop means stop.",
        "Continuing after a clear no is crossing a boundary ‚Äî even if it was brief, even if you felt confused, even if you were ‚Äòcaught up.‚Äô",
        "Accountability here means acknowledging impact, stopping immediately in the future, and taking active steps to change behavior."
      ],
      `<details style="margin-top:4px;">
        <summary style="cursor:pointer; font-weight:900; color: var(--sb-light);">Learn More About Why This Happens</summary>
        <div style="margin-top:8px; color: var(--muted); line-height:1.45;">
          People sometimes override ‚Äúno‚Äù because of entitlement, panic, arousal, peer norms, or the belief that they can change someone‚Äôs mind.
          <br><br>
          The prevention takeaway is direct: ‚Äúno‚Äù ends the moment. If you struggle with stopping, that‚Äôs a sign you need stronger skills, boundaries, and accountability supports ‚Äî not more persuasion.
        </div>
      </details>`,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== New Branch H =====
  if(id==="H_relationship"){
    screen.innerHTML = backBtn() + card(
      "Assuming consent in a relationship",
      [
        "Being in a relationship does not automatically mean consent.",
        "Consent is required every time ‚Äî and it can change moment to moment.",
        "If you assumed yes without checking in, the prevention move is to build a new habit: ask clearly, slow down, and respect boundaries right away."
      ],
      null,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== New Branch I =====
  if(id==="I_not_sure_wanted"){
    screen.innerHTML = backBtn() + card(
      "Not sure they wanted it",
      [
        "If you‚Äôre not sure they wanted it, treat that uncertainty seriously.",
        "Consent usually looks like active participation ‚Äî not silence, stiffness, or doing it just to ‚Äòget it over with.‚Äô",
        "When in doubt: pause, ask, and be ready to stop without argument."
      ],
      null,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== New Branch J =====
  if(id==="J_upset_after"){
    screen.innerHTML = backBtn() + card(
      "They seemed upset afterward",
      [
        "If someone became distant, upset, or quiet afterward, that can be a sign they didn‚Äôt feel okay about what happened.",
        "You don‚Äôt need them to ‚Äòprove‚Äô anything for their feelings to matter.",
        "Accountability here can look like listening, apologizing without pressure, and respecting whatever boundaries they set."
      ],
      null,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== New Branch K =====
  if(id==="K_not_sure_what"){
    screen.innerHTML = backBtn() + card(
      "Still not sure what happened",
      [
        "Confusion is common ‚Äî especially when emotions, alcohol, or pressure were involved.",
        "A helpful question: did you check in clearly and get an enthusiastic yes? If not, the safest assumption is that you need stronger consent practices.",
        "You can‚Äôt redo the past, but you can choose accountability now: learn, change habits, and avoid repeating harm."
      ],
      null,
      grid(btn("Continue","toEmotion","btn btnPrimary"))
    );
    actions.toEmotion=()=>go("emotion");
    return;
  }

  // ===== Shared emotion + next steps =====
  if(id==="emotion"){
    screen.innerHTML = backBtn() + card(
      "What are you feeling right now?",
      ["Pick the closest one."],
      null,
      grid(
        btnIcon("Guilt","guilt","üòî") +
        btnIcon("Defensive","defensive","üò§") +
        btnIcon("Confused / unsure","confused","üòï") +
        btnIcon("Ashamed","ashamed","üò≥") +
        btnIcon("Anxious / panicking","anxious","üò∞") +
        btnIcon("Angry","angry","üò†") +
        btnIcon("Numb","numb","üò∂")
      )
    );
    actions.guilt=()=>{state.emotion="guilt"; go("emotionMessage");};
    actions.defensive=()=>{state.emotion="defensive"; go("emotionMessage");};
    actions.confused=()=>{state.emotion="confused"; go("emotionMessage");};
    actions.ashamed=()=>{state.emotion="ashamed"; go("emotionMessage");};
    actions.anxious=()=>{state.emotion="anxious"; go("emotionMessage");};
    actions.angry=()=>{state.emotion="angry"; go("emotionMessage");};
    actions.numb=()=>{state.emotion="numb"; go("emotionMessage");};
    return;
  }

  if(id==="emotionMessage"){
    const msg = state.emotion==="guilt"
      ? `You‚Äôre feeling guilty.

That feeling usually shows up when you care about impact. It means something in you recognizes that what happened may not have felt okay to the other person.

Guilt doesn‚Äôt mean you‚Äôre permanently a bad person. It means you‚Äôre noticing something that needs attention.

Instead of spiraling, slow down and get specific. Ask yourself: what exactly would I do differently next time?

Guilt becomes useful when it turns into a concrete behavior change. That‚Äôs accountability.`
      : (state.emotion==="defensive"
        ? `You‚Äôre feeling defensive.

That‚Äôs common when something threatens how you see yourself. It‚Äôs uncomfortable to even consider that you may have caused harm.

Defensiveness often sounds like: ‚ÄúI didn‚Äôt mean to,‚Äù ‚ÄúThat‚Äôs not who I am,‚Äù or ‚ÄúIt wasn‚Äôt that bad.‚Äù

You can care about your identity and still examine your behavior honestly.

Try this: if you set aside your intention for a moment, what might their experience have been?`
        : (state.emotion==="confused"
          ? `You‚Äôre feeling confused.

Confusion often happens when signals were subtle, mixed, or never clearly spoken ‚Äî especially if emotions, pressure, or alcohol were involved.

Instead of asking ‚ÄúWas that technically okay?‚Äù try asking: was there clear, enthusiastic agreement?

Uncertainty usually means clarity was missing.

Going forward: if you don‚Äôt have a clear yes, slow down. Ask directly. Be prepared to stop without arguing.`
          : (state.emotion==="ashamed"
            ? `You‚Äôre feeling shame.

Shame can feel heavy. It can make you want to disappear, deny, or punish yourself.

But shame tends to focus on identity ‚Äî ‚ÄúI am bad‚Äù ‚Äî instead of behavior ‚Äî ‚ÄúI made a harmful choice.‚Äù Those are not the same.

You don‚Äôt have to destroy yourself to take responsibility. What matters is whether you‚Äôre willing to look honestly at what happened and change your behavior going forward.

Stay with the discomfort without collapsing into self-hatred. Growth requires staying present.`
            : (state.emotion==="anxious"
              ? `You‚Äôre feeling anxious or panicked.

When consequences feel possible, your body reacts. That‚Äôs a nervous system response.

Panic can push you toward worst-case thinking. Pause and slow your body first.

You don‚Äôt have to solve everything immediately. Focus on one question: what is the most responsible next step I can take?

Calm first. Act second.`
              : (state.emotion==="angry"
                ? `You‚Äôre feeling angry.

Anger often shows up when something feels unfair, exaggerated, or threatening.

But anger can protect your ego in ways that block reflection.

Instead of asking ‚ÄúIs this fair to me?‚Äù try asking: what might have felt uncomfortable or unsafe for them?

Don‚Äôt text. Don‚Äôt argue. Let the intensity drop before making decisions. Reflection requires steadiness.`
                : `You‚Äôre feeling numb.

Sometimes when something feels overwhelming, your brain shuts things down. Numbness can be a protective response.

Not feeling much doesn‚Äôt mean nothing happened. And it doesn‚Äôt remove responsibility.

If emotions aren‚Äôt accessible right now, focus on behavior: did I check in clearly? Did I continue after hesitation? Was there pressure involved?

You can change future actions even before your feelings fully catch up.`)))));

    const parts = msg.split("\n\n").filter(Boolean);

    let extra = "";

if(state.emotion==="anxious"){
  extra = breatheWidget() + `<div class="mutedBox"><b>Try this:</b> breathe in as it grows‚Ä¶ breathe out as it shrinks. Two cycles is enough to get a little steadier.</div>`;
}

if(state.emotion==="numb"){
  extra = catRunnerMarkup();
}

    screen.innerHTML = backBtn() + card(
      "Okay.",
      parts,
      null,
      extra + grid(btn("Continue","nextSteps","btn btnPrimary"))
    );
if(state.emotion==="numb"){
  // wait a tick so the canvas exists in the DOM
  setTimeout(initCatRunner, 0);
} else {
  // if we leave the numb screen, stop the game loop / listeners
  if (catRunnerCleanup) catRunnerCleanup();
}

    actions.nextSteps=()=>go("nextSteps");
    return;
  }

  if(id==="nextSteps"){
    screen.innerHTML = backBtn() + card(
      "What do you want to do next?",
      ["Choose one to start. You can come back and try others."],
      null,
      grid(
        btn("Learn (quick basics)","learn") +
        btn("Prevent it from happening again (skills)","prevent") +
        btn("Repair (if appropriate)","repair") +
        btn("Talk to someone / get support","support") +
        btn("Finish for now","closing")
      ) + `<div class="mutedBox"><b>Reminder:</b> This is not legal advice. It doesn‚Äôt determine guilt or labels.</div>`
    );
    actions.learn=()=>go("learn");
    actions.prevent=()=>go("prevent");
    actions.repair=()=>go("repair");
    actions.support=()=>go("support");
    actions.closing=()=>go("closing");
    return;
  }

  if(id==="learn"){
  screen.innerHTML = backBtn() + `
    <div class="h1">Learn (quick basics)</div>
    <div class="p">Swipe or click through the slides below.</div>

    <div style="
      position:relative;
      padding-top:56.25%;
      height:0;
      overflow:hidden;
      border-radius:18px;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      margin-top:14px;
      background:rgba(0,0,0,.25);
    ">
      <iframe 
        src="https://docs.google.com/presentation/d/e/2PACX-1vTqott0nhwUnLhRY72eAyETCUjW-Lk-bCAZDao9CzBgaht8NMUydeVce8thEtwnBqabaYGHwURKpiq8/pubembed?start=true&loop=true&delayms=30000"
        frameborder="0"
        allowfullscreen="true"
        mozallowfullscreen="true"
        webkitallowfullscreen="true"
        style="
          position:absolute;
          top:0;
          left:0;
          width:100%;
          height:100%;
        ">
      </iframe>
    </div>

    <div class="grid" style="margin-top:18px;">
      ${btn("Back","nextSteps")}
      ${btn("Finish","closing","btn btnPrimary")}
    </div>
  `;
  actions.nextSteps = ()=>go("nextSteps");
  actions.closing = ()=>go("closing");
  return;
}

  if(id==="prevent"){
    screen.innerHTML = card(
      "Prevent it from happening again",
      [
        "1) If you feel uncertainty: <b>pause</b>.",
        "2) Ask: ‚ÄúAre you okay? Want to stop?‚Äù",
        "3) If they freeze/go quiet/pull away: <b>stop</b>.",
        "4) Treat consent as ongoing ‚Äî not a one-time question."
      ],
      null,
      grid(btn("Back","nextSteps") + btn("Finish","closing","btn btnPrimary"))
    );
    actions.nextSteps=()=>go("nextSteps");
    actions.closing=()=>go("closing");
    return;
  }

  if(id==="repair"){
    screen.innerHTML = card(
      "Repair (if appropriate)",
      [
        "Accountability doesn‚Äôt mean getting forgiven. It means taking responsibility and respecting boundaries.",
        "If you reach out, don‚Äôt ask them to comfort you. Keep it short, respectful, and allow space."
      ],
      "<b>Possible script:</b> ‚ÄúI‚Äôve been thinking about what happened. I‚Äôm sorry I didn‚Äôt pause and check in. You didn‚Äôt deserve that. I‚Äôll respect whatever space you want.‚Äù",
      grid(btn("Back","nextSteps") + btn("Finish","closing","btn btnPrimary"))
    );
    actions.nextSteps=()=>go("nextSteps");
    actions.closing=()=>go("closing");
    return;
  }

  if(id==="support"){
    screen.innerHTML = card(
      "Support options",
      [
        "If you want structured accountability learning, consider SafeBAE‚Äôs accountability training.",
        "If you‚Äôre overwhelmed or unsafe, reaching out for support can help."
      ],
      null,
      `<div class="grid">
        <a class="btn" href="https://safebae.org/360-schools/accountability-training/" target="_blank" rel="noopener">SafeBAE Accountability Training (external)</a>
        <a class="btn" href="https://rainn.org/" target="_blank" rel="noopener">RAINN (external)</a>
        <a class="btn" href="https://988lifeline.org/" target="_blank" rel="noopener">988 Lifeline (external)</a>
        <a class="btn" href="https://www.crisistextline.org/" target="_blank" rel="noopener">Crisis Text Line (external)</a>
      </div>` +
      grid(btn("Back","nextSteps") + btn("Finish","closing","btn btnPrimary"))
    );
    actions.nextSteps=()=>go("nextSteps");
    actions.closing=()=>go("closing");
    return;
  }

  if(id==="closing"){
    screen.innerHTML = card(
      "You paused. That matters.",
      [
        "Taking a minute to reflect reduces the chance of harm happening again.",
        "If you‚Äôre willing to learn and change, that‚Äôs important.",
        "You can restart anytime."
      ],
      null,
      grid(btn("Restart","restart","btn btnPrimary") + btn("Pathways menu","pathMenu"))
    );
    actions.restart=()=>reset();
    actions.pathMenu=()=>go("pathMenu");
    return;
  }

  if(id==="pathMenu"){
    screen.innerHTML = backBtn() + card(
      "Prototype pathways menu",
      ["Jump directly into a pathway (for demo)."],
      null,
      grid(
        btn("Freeze","jumpFreeze","btn btnPrimary") +
        btn("Pulled away","jumpPull") +
        btn("Drinking","jumpDrink") +
        btn("Pressure","jumpPressure") +
        btn("Age/power","jumpAgePower") +
        btn("Digital","jumpDigital") +
        btn("Ignored no","jumpCoercion") +
        btn("Relationship assumed consent","jumpRelationship") +
        btn("Not sure they wanted it","jumpWanted") +
        btn("Upset afterward","jumpUpset") +
        btn("Still not sure","jumpNotSure") +
        btn("Back to start","landing")
      )
    );
    actions.jumpFreeze=()=>{go("A_freeze_whatItMeans");};
    actions.jumpPull=()=>{go("C_pulledAway_signal");};
    actions.jumpDrink=()=>{go("B_drinking_basics");};
    actions.jumpPressure=()=>{go("D_pressure");};
    actions.jumpAgePower=()=>{go("E_age_power");};
    actions.jumpDigital=()=>{go("F_digital");};
    actions.jumpCoercion=()=>{go("G_coercion");};
    actions.jumpRelationship=()=>{go("H_relationship");};
    actions.jumpWanted=()=>{go("I_not_sure_wanted");};
    actions.jumpUpset=()=>{go("J_upset_after");};
    actions.jumpNotSure=()=>{go("K_not_sure_what");};
    actions.landing=()=>go("landing");
    return;
  }
  if(id==="consentEdu"){
    screen.innerHTML = backBtn() + card(
      "Understanding Consent",
      [
        "<b>Consent is ongoing.</b> It must be clear, voluntary, and can change at any time.",
        "<b>Silence isn‚Äôt consent.</b> If someone freezes, goes quiet, or pulls away ‚Äî pause and check in.",
        "<b>Consent requires capacity.</b> Someone who is significantly impaired by alcohol or pressure may not be able to freely agree.",
        "<b>Relationships don‚Äôt equal consent.</b> Consent is required every time."
      ],
      `<div class="note">
        Healthy consent includes active participation, mutual enthusiasm, and the ability to say no without pressure.
      </div>`,
      grid(
        btn("Continue","emotion","btn btnPrimary") +
        btn("Return to start","landing")
      )
    );

    actions.emotion = ()=>go("emotion");
    actions.landing = ()=>go("landing");
    return;
  }

  if(id==="about"){
    screen.innerHTML = backBtn() + card(
      "About this prototype",
      [
        "This is a prototype of a private accountability and reflection tool. It is designed for moments of uncertainty ‚Äî when someone is questioning whether they crossed a boundary or harmed someone.",
        "Rather than labeling or judging, the tool guides users through structured reflection on the situation and their emotional responses. It helps people pause, examine specific behaviors, and understand how factors such as consent, pressure, alcohol, and power dynamics can shape impact.",
        "The tool is non-punitive and educational. It does not collect personal information, assign labels, or make legal determinations. Its purpose is to reduce harm by increasing awareness, strengthening accountability, and building practical prevention skills that support lasting behavior change.",
        "This version demonstrates how scenario-based pathways and emotional check-ins work together to guide safer choices moving forward."

      ],
      null,
      grid(btn("Back","landing","btn btnPrimary"))
    );
    actions.landing=()=>go("landing");
    return;
  }

  if(id==="decoy"){
    screen.innerHTML = backBtn() + card(
      "Weekly Study Planner",
      [
        "Mon: Math ‚Ä¢ Tue: English ‚Ä¢ Wed: Science ‚Ä¢ Thu: History ‚Ä¢ Fri: Catch-up",
        "Tip: Break big tasks into 15-minute blocks."
      ],
      null,
      grid(btn("Return to prototype","landing","btn btnPrimary"))
    );
    actions.landing=()=>go("landing");
    return;
  }
}

render();
</script>
</body>
</html>
